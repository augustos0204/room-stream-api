<!-- Full Screen Login Page -->
<div class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-gradient-to-br from-slate-950 via-purple-950 to-indigo-950">
    <!-- Animated Background Shapes -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-20 left-20 w-72 h-72 bg-purple-500/10 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-20 right-20 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-pink-500/5 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
    </div>

    <!-- Login Container -->
    <div class="relative w-full max-w-md">
        <!-- Logo & Welcome -->
        <div class="text-center mb-8 animate-slide-up">
            <div class="inline-flex items-center justify-center mb-6 animate-float">
                <div class="logo-icon relative w-20 h-20">
                    <%- include('../partials/logo-svg') %>
                </div>
            </div>
            <h1 class="text-4xl font-bold mb-2 bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent">
                Bem-vindo ao RoomStream
            </h1>
            <p class="text-gray-400">Faça login para acessar a plataforma</p>
        </div>

        <!-- Login Card -->
        <div class="dark-glass rounded-2xl border border-gray-700/50 p-8 shadow-2xl animate-slide-up" style="animation-delay: 0.1s;">
            <!-- Tabs: Supabase ou API Key -->
            <div class="flex gap-2 mb-6 p-1 bg-gray-800/50 rounded-lg">
                <% if (features.supabaseAuth) { %>
                <button
                    @click="loginMethod = 'supabase'"
                    class="flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200"
                    :class="loginMethod === 'supabase' 
                        ? 'bg-gradient-to-r from-green-600 to-emerald-600 text-white shadow-lg' 
                        : 'text-gray-400 hover:text-gray-200'"
                >
                    <i data-lucide="shield-check" class="w-4 h-4 inline-block mr-2"></i>
                    Supabase
                </button>
                <% } %>
                <button
                    @click="loginMethod = 'apikey'"
                    class="flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200"
                    :class="loginMethod === 'apikey' 
                        ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg' 
                        : 'text-gray-400 hover:text-gray-200'"
                >
                    <i data-lucide="key" class="w-4 h-4 inline-block mr-2"></i>
                    API Key
                </button>
            </div>

            <!-- Supabase Login -->
            <% if (features.supabaseAuth) { %>
            <div x-show="loginMethod === 'supabase'" x-transition class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">
                        <i data-lucide="mail" class="w-4 h-4 inline-block mr-1"></i>
                        Email
                    </label>
                    <input
                        x-model="supabaseEmail"
                        type="email"
                        placeholder="seu-email@exemplo.com"
                        @keydown.enter="handleSupabaseLogin()"
                        class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/50 transition-all"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">
                        <i data-lucide="lock" class="w-4 h-4 inline-block mr-1"></i>
                        Senha
                    </label>
                    <input
                        x-model="supabasePassword"
                        type="password"
                        placeholder="Sua senha"
                        @keydown.enter="handleSupabaseLogin()"
                        class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/50 transition-all"
                    />
                </div>

                <!-- Error Message -->
                <div x-show="supabaseError" x-transition class="bg-red-900/30 border border-red-500/50 text-red-300 px-4 py-3 rounded-lg text-sm">
                    <div class="flex items-start gap-2">
                        <i data-lucide="alert-circle" class="w-4 h-4 flex-shrink-0 mt-0.5"></i>
                        <span x-text="supabaseError"></span>
                    </div>
                </div>

                <button
                    @click="handleSupabaseLogin()"
                    :disabled="supabaseLoading"
                    class="w-full px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-medium rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:scale-100 shadow-lg shadow-green-500/25 disabled:shadow-none disabled:cursor-not-allowed flex items-center justify-center gap-2"
                >
                    <span x-show="!supabaseLoading" class="flex items-center gap-2">
                        <i data-lucide="log-in" class="w-5 h-5"></i>
                        Entrar com Supabase
                    </span>
                    <span x-show="supabaseLoading" class="flex items-center gap-2">
                        <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                        Entrando...
                    </span>
                </button>
            </div>
            <% } %>

            <!-- API Key Login -->
            <div x-show="loginMethod === 'apikey'" x-transition class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">
                        <i data-lucide="user" class="w-4 h-4 inline-block mr-1"></i>
                        Seu Nome (opcional)
                    </label>
                    <input
                        x-model="participantName"
                        type="text"
                        placeholder="Como deseja ser chamado?"
                        class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/50 transition-all"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">
                        <i data-lucide="key" class="w-4 h-4 inline-block mr-1"></i>
                        API Key
                    </label>
                    <input
                        x-model="apiKeyInput"
                        type="password"
                        placeholder="Digite sua API Key"
                        @keydown.enter="handleApiKeyLogin()"
                        class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/50 transition-all"
                    />
                </div>

                <button
                    @click="handleApiKeyLogin()"
                    class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-medium rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-purple-500/25 flex items-center justify-center gap-2"
                >
                    <i data-lucide="log-in" class="w-5 h-5"></i>
                    Entrar com API Key
                </button>
            </div>
        </div>

        <!-- Footer Info -->
        <div class="mt-6 text-center text-sm text-gray-500 animate-slide-up" style="animation-delay: 0.2s;">
            <p>Real-time WebSocket API para gerenciamento de salas de chat</p>
            <p class="mt-2">Construído com NestJS e Socket.IO</p>
        </div>
    </div>
</div>
