<!-- Platform Topbar -->
<header
    class="fixed top-0 left-0 right-0 dark-glass border-b border-gray-700/50 z-50"
>
    <div class="flex items-center justify-between px-6 py-4">
        <!-- Left: Logo + Sidebar Toggle + Page Title -->
        <div class="flex items-center gap-4">
            <!-- Logo & Sidebar Toggle -->
            <div class="flex items-center gap-3">
                <button
                    @click="toggleSidebar()"
                    class="p-2 rounded-lg transition-all duration-200 relative"
                    :class="sidebarExpanded && window.innerWidth < 1024 ? 'bg-purple-600/20 text-purple-400' : sidebarPinned ? 'bg-purple-600/20 text-purple-400 hover:bg-purple-600/30' : 'hover:bg-gray-700/50 text-gray-400'"
                    :title="window.innerWidth < 1024 ? (sidebarExpanded ? 'Fechar Menu' : 'Abrir Menu') : (sidebarPinned ? 'Desafixar Sidebar' : 'Fixar Sidebar')"
                >
                    <!-- Mobile: Menu Icon -->
                    <i data-lucide="menu" class="w-5 h-5 lg:hidden" x-show="!sidebarExpanded"></i>
                    <i data-lucide="x" class="w-5 h-5 lg:hidden" x-show="sidebarExpanded"></i>
                    
                    <!-- Desktop: Pin Icon -->
                    <i :data-lucide="sidebarPinned ? 'pin' : 'pin-off'" class="w-5 h-5 hidden lg:block"></i>
                    
                    <!-- Indicador visual de estado fixado (desktop only) -->
                    <div 
                        x-show="sidebarPinned" 
                        class="hidden lg:block absolute -top-1 -right-1 w-2 h-2 bg-purple-500 rounded-full animate-pulse"
                    ></div>
                </button>
                
                <div class="flex items-center gap-3 animate-float">
                    <%- include('../partials/logo', { size: 'xs' }) %>
                    <div>
                        <h1 class="text-lg font-bold bg-gradient-to-r from-purple-400 to-pink-500 bg-clip-text text-transparent leading-tight">
                            RoomStream
                        </h1>
                        <p class="text-xs text-gray-400 -mt-0.5">Platform</p>
                    </div>
                </div>
            </div>

            <!-- Divider -->
            <div class="hidden lg:block w-px h-8 bg-gray-700/50"></div>

            <!-- Page Title -->
            <div class="hidden lg:block">
                <h2 class="text-lg font-bold text-white capitalize" x-text="currentPage === 'dashboard' ? 'Dashboard' : currentPage === 'rooms' ? 'Salas' : 'Configurações'"></h2>
            </div>
        </div>

        <!-- Right: Actions -->
        <div class="flex items-center gap-3">
            <!-- Keyboard Shortcuts Button (Desktop only) -->
            <button
                @click="showShortcutsModal = true"
                class="hidden md:block p-2 hover:bg-gray-700/50 rounded-lg transition-colors"
                title="Atalhos de teclado"
            >
                <i data-lucide="keyboard" class="w-5 h-5 text-gray-400"></i>
            </button>

            <!-- Connect/Disconnect Toggle -->
            <button
                @click="toggleConnection()"
                class="px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2"
                :class="isConnected
                    ? 'bg-green-600/20 hover:bg-green-600/30 text-green-400 border border-green-600/50'
                    : connecting
                    ? 'bg-yellow-600/20 text-yellow-400 border border-yellow-600/50 cursor-wait'
                    : 'bg-gray-700/50 hover:bg-gray-700 text-gray-300 border border-gray-600/50'"
                :disabled="connecting"
            >
                <i data-lucide="wifi" class="w-4 h-4" x-show="!connecting"></i>
                <i data-lucide="loader-2" class="w-4 h-4 animate-spin" x-show="connecting"></i>
                <span class="hidden md:inline" x-text="isConnected ? 'Conectado' : connecting ? 'Conectando...' : 'Conectar'"></span>
            </button>
        </div>
    </div>
</header>
